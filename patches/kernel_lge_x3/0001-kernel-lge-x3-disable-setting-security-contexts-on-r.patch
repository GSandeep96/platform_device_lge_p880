From b375257ad6c67fd3ef58ef330555dc65b86a7419 Mon Sep 17 00:00:00 2001
From: streambinder <davidepucci@hiddenhost.org>
Date: Tue, 2 Dec 2014 19:56:07 +0100
Subject: [PATCH] kernel/lge/x3: disable setting security contexts on rootfs
 inodes

---
 security/selinux/hooks.c | 7 -------
 1 file changed, 7 deletions(-)

diff --git a/security/selinux/hooks.c b/security/selinux/hooks.c
index 19d257a..f4ac898 100644
--- a/security/selinux/hooks.c
+++ b/security/selinux/hooks.c
@@ -423,13 +423,6 @@ static int sb_finish_set_opts(struct super_block *sb)
 	if (strncmp(sb->s_type->name, "sysfs", sizeof("sysfs")) == 0)
 		sbsec->flags |= SE_SBLABELSUPP;
 
-	/*
-	 * Special handling for rootfs. Is genfs but supports
-	 * setting SELinux context on in-core inodes.
-	 */
-	if (strncmp(sb->s_type->name, "rootfs", sizeof("rootfs")) == 0)
-		sbsec->flags |= SE_SBLABELSUPP;
-
 	/* Initialize the root inode. */
 	rc = inode_doinit_with_dentry(root_inode, root);
 
-- 
1.9.3
